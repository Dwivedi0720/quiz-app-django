{% extends 'base.html' %}

{% block title %}{{ quiz.title }}{% endblock %}

{% block content %}
<div class="container mt-4">

    <!-- ================= QUIZ HEADER ================= -->
    <div class="card mb-4">
        <div class="card-header">
            <h2>{{ quiz.title }}</h2>
            <span class="quiz-badge badge-{{ quiz.difficulty }}">
                {{ quiz.get_difficulty_display }}
            </span>
        </div>

        <div class="card-body">
            <p class="text-muted mb-4">
                {{ quiz.description }}
            </p>

            <!-- ================= QUIZ STATS ================= -->
            <div class="grid grid-4 mb-4">

                <div class="stats-card">
                    <div class="stats-icon">üìù</div>
                    <div class="stats-number">{{ quiz.total_questions }}</div>
                    <div class="stats-label">Questions</div>
                </div>

                <div class="stats-card">
                    <div class="stats-icon">üéØ</div>
                    <div class="stats-number">{{ quiz.total_marks }}</div>
                    <div class="stats-label">Total Marks</div>
                </div>

                <div class="stats-card">
                    <div class="stats-icon">‚úÖ</div>
                    <div class="stats-number">{{ quiz.pass_percentage }}%</div>
                    <div class="stats-label">Pass %</div>
                </div>

                <div class="stats-card">
                    <div class="stats-icon">‚è±Ô∏è</div>
                    <div class="stats-number">Timed</div>
                    <div class="stats-label">Per Question</div>
                </div>

            </div>

            <!-- ================= INSTRUCTIONS ================= -->
            <div class="alert alert-warning mb-4">
                <strong>‚ö†Ô∏è Important Instructions</strong>
                <ul class="mt-2" style="line-height:1.8; margin-left:1.2rem;">
                    <li>Each question has a fixed time limit</li>
                    <li>You are allowed only one attempt for this quiz</li>
                    <li>Your answers are auto-saved</li>
                    <li>Results and correct answers are shown after submission</li>
                    <li>Do not refresh or close the browser during the quiz</li>
                </ul>
            </div>

            <!-- ================= ACTION ================= -->
            {% if has_attempted %}
                <div class="alert alert-info mb-3">
                    You have already attempted this quiz. Multiple attempts are not allowed.
                </div>

                <a href="{% url 'quiz:quiz_list' %}" class="btn btn-outline" style="width:100%;">
                    Back to Quiz List
                </a>
            {% else %}
                <a href="{% url 'quiz:start_quiz' quiz.id %}"
                   class="btn btn-primary btn-lg"
                   style="width:100%;">
                    Start Quiz üöÄ
                </a>
            {% endif %}
        </div>
    </div>

</div>
{% endblock %}
